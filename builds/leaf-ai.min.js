leaf.ai={PatternList:new leaf.List,lastMessage:"",chat:function(a,b,c){function d(a){return a.replace(/[^a-z0-9*]/gi,"").toLowerCase()}function e(a){return a[Math.floor(Math.random()*a.length)]}function f(a){var b="";return leaf.isDefined(a.get("header"))&&(b+=e(a.get("header"))),leaf.isDefined(a.get("content"))&&(b+=e(a.get("content"))),leaf.isDefined(a.get("footer"))&&(b+=e(a.get("footer"))),b}function g(a,b){return a=d(a),b=d(b),new RegExp("^"+a.split("*").join(".*")+"$").test(b)}var h;return this.PatternList.each(function(b){b.get("pattern").forEach(function(c){g(c,a)&&(h=b)})}),leaf.isDefined(h)?leaf.isFunction(b)&&b(f(h),h):leaf.isFunction(c)&&c(),a}};